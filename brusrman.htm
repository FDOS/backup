<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Ralf Quint">
   <meta name="GENERATOR" content="Mozilla/4.6 [en] (Win98; I) [Netscape]">
   <meta name="Description" content="This document describes the usage for the Backup and the Restore program as available in the FreeDOS distribution">
   <meta name="KeyWords" content="Backup, Restore, User Manual">
   <title>User manual for the FreeDOS Backup &amp; Restore program</title>
</head>
<body>

<center><b><font face="Arial,Helvetica"><font size=+1>BACKUP and RESTORE</font></font></b></center>

<p><a NAME="Usage and Messages"></a><b><font face="Arial,Helvetica">Usage
and messages</font></b>
<p><font face="Arial,Helvetica"><font size=-1>Due to the different versions
of BACKUP and RESTORE in the different DOS versions, there are a lot of
differences in the usage of the programs too.</font></font>
<p><font face="Arial,Helvetica"><font size=-1>As FreeDOS basically claims
compatibility to MS-DOS 3.3, the FreeDOS BACKUP and RESTORE programs default
to the usage of this MS-DOS version. As far as compatibility for different
versions are implemented, a few additional switches and options are introduced.</font></font>
<p><a NAME="Additional Switches"></a><b><font face="Arial,Helvetica"><font size=-1>Additional
switches</font></font></b>
<br>&nbsp;
<center><table WIDTH="90%" >
<tr>
<td VALIGN=TOP><b><font face="Arial,Helvetica"><font size=-1>&nbsp;/?,
/h</font></font></b></td>

<td><font face="Arial,Helvetica"><font size=-1>show short usage/help message
on the screen</font></font>
<p><font face="Arial,Helvetica"><font size=-1>The<b> /?</b>&nbsp; is a
requirement of FreeDOS, the <b>/h</b> is added for convenience. <u>All
other options given in combination with these switches are ignored</u></font></font></td>
</tr>

<tr>
<td></td>

<td></td>
</tr>

<tr>
<td VALIGN=TOP><font face="Arial,Helvetica"><font size=-1><b>&nbsp;/v</b>[<i>version</i>]</font></font></td>

<td><font face="Arial,Helvetica"><font size=-1>define the version of compatibility</font></font>
<p><font face="Arial,Helvetica"><font size=-1>As far as compatibility for
different DOS versions is implemented, the <b><i>/v</i></b> switch can
force the programs to behave accordingly.</font></font>
<table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" >
<tr>
<td VALIGN=TOP><font face="Arial,Helvetica"><font size=-1><b>32</b> or
<b>3.2</b></font></font></td>

<td><font face="Arial,Helvetica"><font size=-1>The program uses data format
and options of the BACKUP/RESTORE command of MS-DOS 3.2x and earlier</font></font></td>
</tr>

<tr>
<td VALIGN=TOP><font face="Arial,Helvetica"><font size=-1><b>33</b> or
<b>3.3</b></font></font></td>

<td><font face="Arial,Helvetica"><font size=-1>The program uses data format
and options of the BACKUP/RESTORE of MS-DOS 3.3 to 5.0x</font></font>
<br><font face="Arial,Helvetica"><font size=-1>This is the default for
both programs</font></font></td>
</tr>
</table>

<p><font face="Arial,Helvetica"><font size=-1>So far, this switch is only
requiered for the BACKUP program as the RESTORE program is able to determine
the data format on it's own.</font></font></td>
</tr>
</table></center>

<p><a NAME="Usage Backup"></a><b><font face="Arial,Helvetica">BACKUP</font></b>
<p><font face="Arial,Helvetica"><font size=-1>Back up one or more files
from one disk onto another.</font></font>
<blockquote><a NAME="Backup: Syntax"></a><b><u><font face="Arial,Helvetica"><font size=-1>Syntax</font></font></u></b>
<br><font face="Arial,Helvetica"><font size=-1><b>backup</b> &lt;<i><b>source</b>></i>
&lt;<i><b>destination-drive:</b>></i> [<b><i>/s</i></b>] [<b><i>/m</i></b>]
[/a] [<b><u>/f</u></b>[<b><i>:size</i></b>]] [<b><i>/d:date</i></b>] [<b><i>/t:time</i></b>]
[<b><i>/l</i></b>[:[<b><i>drive:</i></b>][<b><i>path</i></b>]<b><i>logfile</i></b>]]
[<b><i>/p</i></b>] [<b><i>/</i></b>{<b><i>?,h</i></b>}]</font></font>
<p><a NAME="Backup: Parameters"></a><b><u><font face="Arial,Helvetica"><font size=-1>Parameters</font></font></u></b></blockquote>

<center><table WIDTH="90%" >
<tr>
<td VALIGN=TOP><b><font face="Arial,Helvetica"><font size=-1>source</font></font></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Specifies the location of
the files you want to back up. Source can consist of a drive letter and
a colon, a directory name, a filename or a combination.</font></font></td>
</tr>

<tr>
<td VALIGN=TOP><b><font face="Arial,Helvetica"><font size=-1>destination-drive:</font></font></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Specifies the drive that
contains the disk on which you want to store any backup files. The backup
files are stored accordingly to the chosen compatibility mode (default
is MS-DOS 3.3+)</font></font></td>
</tr>
</table></center>

<blockquote>&nbsp;
<br><a NAME="Backup: Switches"></a><b><u><font face="Arial,Helvetica"><font size=-1>Switches</font></font></u></b>
<table WIDTH="90%" >
<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>/s&nbsp;</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Backup all files of all
subdirectories recursed into</font></font></td>
</tr>

<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>/m</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Back up only files that
have been changed since the last backup (that means all files where the
Archive attribute is set) and turns off the archive attribute of the original
file.</font></font></td>
</tr>

<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>/a</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Add backup files to an existing
backup disk without deleting existing files</font></font></td>
</tr>

<tr>
<td VALIGN=TOP><b><i><font face="Arial,Helvetica"><font size=-1>/f[:size]</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Format the destination drive.
If no size is given, the default for this drive is selected.&nbsp;</font></font>
<br><font face="Arial,Helvetica"><font color="#FF0000"><font size=-1>Not
implemented yet!</font></font></font></td>
</tr>

<tr>
<td VALIGN=TOP><b><i><font face="Arial,Helvetica"><font size=-1>/d:date</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Backup all matching files
changed on or after the given date</font></font>
<br><font face="Arial,Helvetica"><font color="#FF0000"><font size=-1>Not
implemented yet!</font></font></font></td>
</tr>

<tr>
<td VALIGN=TOP><b><i><font face="Arial,Helvetica"><font size=-1>/t:time</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Backup all matching files
changed at or after the given time</font></font>
<br><font face="Arial,Helvetica"><font color="#FF0000"><font size=-1>Not
implemented yet!</font></font></font></td>
</tr>

<tr>
<td VALIGN=TOP><b><i><font face="Arial,Helvetica"><font size=-1>/l[:[drive:][path]logfile]</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Write the filesname of all
backed up files and all error messages to a logfile.</font></font>
<br><font face="Arial,Helvetica"><font color="#FF0000"><font size=-1>Not
implemented yet!</font></font></font></td>
</tr>

<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>/p</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font color="#FF0000"><font size=-1>Not
implemented yet!</font></font></font></td>
</tr>

<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>/{?,h}</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>This is a FreeDOS specific
extension to show a help screen with the usage explanations.</font></font></td>
</tr>
</table>

<p><a NAME="Backup: Errorlevels"></a><b><font face="Arial,Helvetica"><font size=-1>Return
codes/Errorlevels</font></font></b>
<br><font face="Arial,Helvetica"><font size=-1>The BACKUP command sets
the ERRORLEVEL (return code) as follows:</font></font>
<table WIDTH="90%" >
<tr>
<td>
<center><b><font face="Arial,Helvetica"><font size=-1>0</font></font></b></center>
</td>

<td><font face="Arial,Helvetica"><font size=-1>Normal completion</font></font></td>
</tr>

<tr>
<td>
<center><b><font face="Arial,Helvetica"><font size=-1>1</font></font></b></center>
</td>

<td><font face="Arial,Helvetica"><font size=-1>No files were found to backup</font></font></td>
</tr>

<tr>
<td>
<center><b><font face="Arial,Helvetica"><font size=-1>2</font></font></b></center>
</td>

<td><font face="Arial,Helvetica"><font size=-1>Some files not backed up
due to sharing conflicts</font></font></td>
</tr>

<tr>
<td>
<center><b><font face="Arial,Helvetica"><font size=-1>3</font></font></b></center>
</td>

<td><font face="Arial,Helvetica"><font size=-1>Terminated by user (Ctrl-Break
or ESC)</font></font></td>
</tr>

<tr>
<td>
<center><b><font face="Arial,Helvetica"><font size=-1>4</font></font></b></center>
</td>

<td><font face="Arial,Helvetica"><font size=-1>Terminated due to error</font></font></td>
</tr>
</table>
</blockquote>

<blockquote><a NAME="Backup: Notes"></a><b><u><font face="Arial,Helvetica"><font size=-1>Notes</font></font></u></b>
<br><font face="Arial,Helvetica"><font size=-1>- The BACKUP program allows
only to do backups from a fixed disk to a diskette (removable disk). Other
combinations will only be implemented if there are enough resonable requests
for it.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>- The BACKUP program doesn't
do a format of the destination diskettes (yet).</font></font></blockquote>

<blockquote><a NAME="Backup: Examples"></a><b><u><font face="Arial,Helvetica"><font size=-1>Examples</font></font></u></b></blockquote>

<br>&nbsp;
<p><a NAME="Usage Restore"></a><b><font face="Arial,Helvetica">RESTORE</font></b>
<p><font face="Arial,Helvetica"><font size=-1>Restore files that have been
backed up by the BACKUP command.</font></font>
<blockquote><a NAME="Restore: Syntax"></a><b><u><font face="Arial,Helvetica"><font size=-1>Syntax</font></font></u></b>
<br><font face="Arial,Helvetica"><font size=-1><b>restore</b> &lt;<b><i>drive1:</i></b>>
&lt;<b><i>drive2:</i></b>>[<b><i>path</i></b>[<b><i>filename</i></b>]]
[<b><i>/s</i></b>] [<b><i>/p</i></b>] [<b><i>/b:date</i></b>] [<b><i>/a:date</i></b>]
[<b><i>/e:time</i></b>] [<b><i>/l:time</i></b>][<b><i>/m</i></b>] [<b><i>/n</i></b>]
[<b><i>/d</i></b>]</font></font></blockquote>

<blockquote><a NAME="Restore: Parameters"></a><b><font face="Arial,Helvetica"><font size=-1>Parameters</font></font></b>
<table WIDTH="90%" >
<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>drive1:</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>The drive that contains
the backed-up files</font></font></td>
</tr>

<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>drive2:</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>The drive to which the backed-up
files are going to be restored</font></font></td>
</tr>

<tr>
<td VALIGN=TOP><b><i><font face="Arial,Helvetica"><font size=-1>path</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>The directory to which the
backed-up files are going to be restored. In MS-DOS you had to specify
the same directory form which the files were backed-up. The FreeDOS restore
program allows to specify any directory as the base for the to be restored
directory structure.</font></font></td>
</tr>

<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>filename</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>The names of the files that
are going to be restored</font></font></td>
</tr>
</table>

<p><a NAME="Restore: Switches"></a><b><font face="Arial,Helvetica"><font size=-1>Switches</font></font></b>
<table WIDTH="90%" >
<tr>
<td VALIGN=TOP><b><i><font face="Arial,Helvetica"><font size=-1>/s</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Restore all subdirectories</font></font></td>
</tr>

<tr>
<td VALIGN=TOP><b><i><font face="Arial,Helvetica"><font size=-1>/p</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Prompt for permission to
restore files that are marked as read-only or that have changed since the
last backup (archive bit set)</font></font></td>
</tr>

<tr>
<td VALIGN=TOP><b><i><font face="Arial,Helvetica"><font size=-1>/b:date</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Restore only those files
modified on or before the given date.</font></font></td>
</tr>

<tr>
<td></td>

<td><b><font face="Arial,Helvetica"><font size=-1></font></font></b>
<br><b><font face="Arial,Helvetica"><font size=-1>The following switches
are only valid for backup files with the data format of the DOS versions
3.3x to 5.0x</font></font></b></td>
</tr>

<tr>
<td VALIGN=TOP><b><i><font face="Arial,Helvetica"><font size=-1>/a:date</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Restore only those files
modified on or after the given date.</font></font></td>
</tr>

<tr>
<td></td>

<td><font face="Arial,Helvetica"><font size=-1><b><u>Note: </u></b>As country
specific settings are not implemented yet, the format for the date has
to be given as YYYY-MM-DD. This is Y2K safe and the most universal format
anyway.</font></font></td>
</tr>

<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>/e:time</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Restore only those files
modified at or earlier than the given time</font></font></td>
</tr>

<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>/l:time</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Restore only those files
modified at or later than the given time</font></font></td>
</tr>

<tr>
<td></td>

<td><font face="Arial,Helvetica"><font size=-1><b><u>Note:</u></b> the
time has to be given in 24h format. A check for the american 12h format
has not (yet) be implemented</font></font></td>
</tr>

<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>/m</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Restore only those files
modified since the last backup (archive bit set)</font></font></td>
</tr>

<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>/n</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Restore only those files
that don’t exist on the destination drive</font></font></td>
</tr>

<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>/d</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>Display those files that
match the files specified for backup without actually restoring any files</font></font></td>
</tr>

<tr>
<td></td>

<td><font face="Arial,Helvetica"><font size=-1><b><u>Note:</u></b> even
though no files are actually restored, you have to specify drive2</font></font></td>
</tr>

<tr>
<td></td>

<td></td>
</tr>

<tr>
<td><b><i><font face="Arial,Helvetica"><font size=-1>/{?,h}</font></font></i></b></td>

<td><font face="Arial,Helvetica"><font size=-1>This is a FreeDOS specific
extension to show a help screen with the usage explanations.</font></font></td>
</tr>
</table>

<p><a NAME="Restore: Errorlevels"></a><b><font face="Arial,Helvetica"><font size=-1>Return
codes/Errorlevels</font></font></b>
<br><font face="Arial,Helvetica"><font size=-1>The RESTORE command sets
the ERRORLEVEL (return code) as follows:</font></font>
<table WIDTH="90%" >
<tr>
<td>
<center><b><font face="Arial,Helvetica"><font size=-1>0</font></font></b></center>
</td>

<td><font face="Arial,Helvetica"><font size=-1>Normal completion</font></font></td>
</tr>

<tr>
<td>
<center><b><font face="Arial,Helvetica"><font size=-1>1</font></font></b></center>
</td>

<td><font face="Arial,Helvetica"><font size=-1>No files were found to restore</font></font></td>
</tr>

<tr>
<td>
<center><b><font face="Arial,Helvetica"><font size=-1>2</font></font></b></center>
</td>

<td><font face="Arial,Helvetica"><font size=-1>Some files not restored
due to sharing conflicts</font></font></td>
</tr>

<tr>
<td>
<center><b><font face="Arial,Helvetica"><font size=-1>3</font></font></b></center>
</td>

<td><font face="Arial,Helvetica"><font size=-1>Terminated by user (Ctrl-Break
or ESC)</font></font></td>
</tr>

<tr>
<td>
<center><b><font face="Arial,Helvetica"><font size=-1>4</font></font></b></center>
</td>

<td><font face="Arial,Helvetica"><font size=-1>Terminated due to error</font></font></td>
</tr>
</table>
</blockquote>

<blockquote><a NAME="Restore: Notes"></a><b><font face="Arial,Helvetica"><font size=-1>Notes</font></font></b>
<br><font face="Arial,Helvetica"><font size=-1>- To do a better job on
restoring incomplete backup sets, the <b><i>/d</i></b> option uses a different
format for the output list of files. It will show the sequence number of
the disk (in case the disks are not marked properly) and it will also show
special notes about split files at the beginning or the end of the disk.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>In case of the restore of
an incomplete backup set, this way the user can make a decision to restore
partial files before the actual restore procedure.</font></font>
<p><font face="Arial,Helvetica"><font size=-1>-</font></font></blockquote>

<blockquote><a NAME="Restore: Examples"></a><b><font face="Arial,Helvetica"><font size=-1>Examples</font></font></b></blockquote>

</body>
</html>
